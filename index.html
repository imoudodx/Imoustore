<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>imou store ğŸ‡¹ğŸ‡³ - Ù…ØªØ¬Ø± Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            background-color: #111827; /* Dark background */
            color: #f9fafb;
        }
        .card {
            background-color: #1f2937;
            border: 1px solid #374151;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.7);
            transition: opacity 0.3s ease;
        }
        .modal-content {
            background-color: #1f2937;
            transition: transform 0.3s ease;
        }
        .btn-primary {
            background-color: #3b82f6;
            color: white;
            transition: background-color 0.2s;
        }
        .btn-primary:hover {
            background-color: #2563eb;
        }
        .btn-secondary {
            background-color: #4b5563;
            color: white;
            transition: background-color 0.2s;
        }
        .btn-secondary:hover {
            background-color: #374151;
        }
        .btn-danger {
             background-color: #ef4444;
             color: white;
             transition: background-color 0.2s;
        }
        .btn-danger:hover {
            background-color: #dc2626;
        }
        .form-input {
            background-color: #374151;
            border: 1px solid #4b5563;
            color: white;
        }
        .form-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #1d4ed8;
        }
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header class="bg-gray-800 shadow-lg py-4 px-6 sticky top-0 z-40">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-3xl font-bold text-white">
                imou store <span class="text-red-500">ğŸ‡¹ğŸ‡³</span>
            </h1>
            <button id="adminPanelBtn" class="hidden btn-secondary py-2 px-4 rounded-lg items-center gap-2" title="Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±">
                <i class="fas fa-user-shield"></i>
                <span>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto p-6">
        <!-- Search and Add Section -->
        <div class="mb-8 p-4 bg-gray-800 rounded-lg shadow-md flex flex-col md:flex-row gap-4 items-center justify-between">
            <div class="relative w-full md:w-1/2">
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø­Ø³Ø§Ø¨ Ø£Ùˆ Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø¨Ø§Ù„Ø³Ø¹Ø±..." class="form-input w-full p-3 pr-10 rounded-lg">
                <i class="fas fa-search absolute top-1/2 right-3 transform -translate-y-1/2 text-gray-400"></i>
                <small class="text-gray-400 mt-1 block">ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ (Ù…Ø«Ø§Ù„: "Ø­Ø³Ø§Ø¨ Ø¨Ø¨Ø¬ÙŠ") Ø£Ùˆ Ø¨Ø§Ù„Ø³Ø¹Ø± (Ù…Ø«Ø§Ù„: "50").</small>
            </div>
            <button id="addProductBtn" class="btn-primary w-full md:w-auto py-3 px-6 rounded-lg font-semibold flex items-center justify-center gap-2">
                <i class="fas fa-plus-circle"></i>
                <span>Ø£Ø¶Ù Ù…Ù†ØªØ¬Ùƒ Ù„Ù„Ø¨ÙŠØ¹</span>
            </button>
        </div>

        <!-- Products Grid -->
        <div id="productsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
            <!-- Product cards will be inserted here by JavaScript -->
        </div>
        <div id="noResults" class="hidden text-center py-16">
            <i class="fas fa-box-open fa-4x text-gray-500 mb-4"></i>
            <h2 class="text-2xl font-semibold text-gray-400">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†ØªØ§Ø¦Ø¬ Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ø¨Ø­Ø«Ùƒ.</h2>
            <p class="text-gray-500">Ø¬Ø±Ù‘Ø¨ ÙƒÙ„Ù…Ø© Ø¨Ø­Ø« Ø£Ø®Ø±Ù‰.</p>
        </div>
    </main>

    <!-- Add/Edit Product Modal -->
    <div id="addProductModal" class="fixed inset-0 z-50 modal-backdrop items-center justify-center hidden opacity-0">
        <div class="modal-content w-11/12 md:max-w-lg mx-auto rounded-xl shadow-lg p-6 transform -translate-y-10">
            <div class="flex justify-between items-center border-b border-gray-600 pb-3 mb-4">
                <h3 id="modalTitle" class="text-2xl font-bold">Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h3>
                <button id="closeAddModal" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div class="space-y-4">
                <div id="paymentInstructions" class="p-4 bg-yellow-900/50 border border-yellow-700 rounded-lg text-yellow-200">
                    <h4 class="font-bold flex items-center gap-2"><i class="fas fa-exclamation-triangle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ù†Ø´Ø±</h4>
                    <p class="text-sm">Ù„Ù†Ø´Ø± Ù…Ù†ØªØ¬ÙƒØŒ ÙŠØ¬Ø¨ Ø¯ÙØ¹ Ø±Ø³ÙˆÙ… Ø¨Ù‚ÙŠÙ…Ø© <strong class="font-bold">3 Ø¯ÙŠÙ†Ø§Ø± ØªÙˆÙ†Ø³ÙŠ</strong>.</p>
                    <p class="text-sm mt-1">ÙŠØªÙ… Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± ØªØ­ÙˆÙŠÙ„ Ø±ØµÙŠØ¯ Ooredoo Ø¥Ù„Ù‰ Ø§Ù„Ø±Ù‚Ù…: <strong class="font-bold tracking-wider">46625630</strong>.</p>
                    <p class="text-sm mt-2">Ø¨Ø¹Ø¯ ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø±ØµÙŠØ¯ØŒ Ù‚Ù… Ø¨Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ø¶ØºØ· Ø¹Ù„Ù‰ "Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬". Ø³ÙŠØªÙ… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø·Ù„Ø¨Ùƒ.</p>
                </div>
                <input type="hidden" id="editingProductId">
                <input type="text" id="productName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ (Ù…Ø«Ø§Ù„: Ø­Ø³Ø§Ø¨ ÙØ±ÙŠ ÙØ§ÙŠØ±)" class="form-input w-full p-3 rounded-lg">
                <input type="number" id="productPrice" placeholder="Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙŠÙ†Ø§Ø± Ø§Ù„ØªÙˆÙ†Ø³ÙŠ (Ù…Ø«Ø§Ù„: 50)" class="form-input w-full p-3 rounded-lg">
                <textarea id="productDesc" placeholder="ÙˆØµÙ Ù‚ØµÙŠØ± Ù„Ù„Ù…Ù†ØªØ¬ ÙˆÙ…Ù…ÙŠØ²Ø§ØªÙ‡" class="form-input w-full p-3 rounded-lg h-24"></textarea>
                <input type="text" id="facebookLink" placeholder="Ø±Ø§Ø¨Ø· Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ Ù„Ù„ØªÙˆØ§ØµÙ„" class="form-input w-full p-3 rounded-lg">
                <div>
                    <label for="productImage" class="block mb-2 text-sm font-medium text-gray-300">Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ù„Ù…Ù†ØªØ¬</label>
                    <input type="file" id="productImage" accept="image/*" class="form-input w-full p-2 rounded-lg file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-600 file:text-white hover:file:bg-blue-700">
                    <img id="imagePreview" src="" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©" class="hidden mt-4 rounded-lg max-h-48 mx-auto"/>
                </div>
                <div id="paymentConfirmationWrapper" class="flex items-center">
                    <input type="checkbox" id="paymentConfirmation" class="form-input w-4 h-4 rounded">
                    <label for="paymentConfirmation" class="mr-2 text-sm">Ø£Ø¤ÙƒØ¯ Ø£Ù†Ù†ÙŠ Ù‚Ù…Øª Ø¨ØªØ­ÙˆÙŠÙ„ Ù…Ø¨Ù„Øº 3 Ø¯ÙŠÙ†Ø§Ø± Ø±ØµÙŠØ¯ Ooredoo.</label>
                </div>
                <button id="submitProduct" class="btn-primary w-full p-3 rounded-lg font-bold">Ù†Ø´Ø± Ø§Ù„Ù…Ù†ØªØ¬</button>
            </div>
        </div>
    </div>

    <!-- View Product Modal -->
    <div id="viewProductModal" class="fixed inset-0 z-50 modal-backdrop items-center justify-center hidden opacity-0">
        <div class="modal-content w-11/12 md:max-w-2xl mx-auto rounded-xl shadow-lg p-6 transform -translate-y-10">
             <div class="flex justify-between items-center border-b border-gray-600 pb-3 mb-4">
                <h3 id="viewProductName" class="text-2xl font-bold"></h3>
                <button id="closeViewModal" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div>
                <img id="viewProductImage" src="" class="w-full h-64 object-contain rounded-lg mb-4 bg-gray-900">
                <p class="text-2xl font-bold text-blue-400 mb-2"><span id="viewProductPrice"></span> Ø¯ÙŠÙ†Ø§Ø± ØªÙˆÙ†Ø³ÙŠ</p>
                <p class="text-gray-300 mb-6" id="viewProductDesc"></p>
                <a id="viewFacebookLink" href="#" target="_blank" class="btn-primary w-full p-3 rounded-lg font-bold flex items-center justify-center gap-2 text-lg">
                    <i class="fab fa-facebook"></i>
                    <span>Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¨Ø§Ø¦Ø¹</span>
                </a>
            </div>
        </div>
    </div>
    
    <!-- Admin Panel Modal -->
    <div id="adminModal" class="fixed inset-0 z-50 modal-backdrop items-center justify-center hidden opacity-0">
        <div class="modal-content w-11/12 md:max-w-xl mx-auto rounded-xl shadow-lg p-6 transform -translate-y-10">
             <div class="flex justify-between items-center border-b border-gray-600 pb-3 mb-4">
                <h3 class="text-2xl font-bold">Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯ÙŠØ±</h3>
                <button id="closeAdminModal" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-center">
                <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="text-gray-400 text-sm">Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ÙŠÙˆÙ… (Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©)</p>
                    <p class="text-3xl font-bold text-green-400"><span id="dailyProfit">0</span> <span class="text-lg">Ø¯ÙŠÙ†Ø§Ø±</span></p>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="text-gray-400 text-sm">Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¹Ø±ÙˆØ¶Ø©</p>
                    <p class="text-3xl font-bold text-green-400"><span id="totalValue">0</span> <span class="text-lg">Ø¯ÙŠÙ†Ø§Ø±</span></p>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="text-gray-400 text-sm">Ø²ÙˆØ§Ø± Ø§Ù„ÙŠÙˆÙ… (ØªÙ‚Ø¯ÙŠØ±ÙŠ)</p>
                    <p class="text-3xl font-bold text-blue-400">152</p>
                </div>
                <div class="bg-gray-700 p-4 rounded-lg">
                    <p class="text-gray-400 text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª</p>
                    <p id="totalPosts" class="text-3xl font-bold text-blue-400">0</p>
                </div>
            </div>
             <p class="text-xs text-gray-500 mt-4 text-center">Ù‡Ø°Ù‡ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ØªØªØ­Ø¯Ø« Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø¥Ø¶Ø§ÙØ§Øª ÙˆØ§Ù„Ø­Ø°Ù.</p>
        </div>
    </div>
    
    <!-- Custom Alert Modal -->
    <div id="alertModal" class="fixed top-5 right-5 z-50 bg-red-500 text-white py-3 px-5 rounded-lg shadow-lg transform translate-x-full transition-transform duration-300">
        <p id="alertMessage"></p>
    </div>
    
    <!-- Custom Confirm Modal -->
    <div id="confirmModal" class="fixed inset-0 z-50 modal-backdrop items-center justify-center hidden opacity-0">
        <div class="modal-content w-11/12 sm:max-w-sm mx-auto rounded-xl shadow-lg p-6 transform -translate-y-10">
            <h3 class="text-lg font-bold mb-4" id="confirmTitle">Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ</h3>
            <p class="text-sm text-gray-300 mb-6" id="confirmMessage">Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.</p>
            <div class="flex justify-end gap-4">
                <button id="confirmCancel" class="btn-secondary py-2 px-4 rounded-lg">Ø¥Ù„ØºØ§Ø¡</button>
                <button id="confirmOk" class="btn-danger py-2 px-4 rounded-lg">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø°Ù</button>
            </div>
        </div>
    </div>


<script>
    // This script will run after the HTML document is fully loaded
    document.addEventListener('DOMContentLoaded', () => {
        let isAdmin = false;
        let products = [];
        let newPostsToday = 0;
        const POST_FEE = 3;

        // --- Sample Data (for demonstration) ---
        // These products will appear when the page loads for the first time.
        const sampleProducts = [
            { id: 1, name: 'Ø­Ø³Ø§Ø¨ Ø¨Ø¨Ø¬ÙŠ Ù…ÙˆØ¨Ø§ÙŠÙ„ Ù…Ø³ØªÙˆÙ‰ 70', price: 150, desc: 'Ø­Ø³Ø§Ø¨ Ù‚Ø¯ÙŠÙ… ÙÙŠÙ‡ Ø³ÙƒÙ†Ø§Øª Ù†Ø§Ø¯Ø±Ø© ÙˆØ£Ø³Ù„Ø­Ø© Ù…Ø·ÙˆØ±Ø©. Ø§Ù„Ø±Ø¨Ø· ØªÙˆÙŠØªØ± ÙÙ‚Ø·.', facebook: 'https://facebook.com', image: 'https://placehold.co/600x400/1f2937/ffffff?text=PUBG+Account' },
            { id: 2, name: 'Ø­Ø³Ø§Ø¨ ÙØ±ÙŠ ÙØ§ÙŠØ± Ø£Ø³Ø·ÙˆØ±ÙŠ', price: 80, desc: 'Ø­Ø³Ø§Ø¨ ÙÙŠÙ‡ Ø´Ø®ØµÙŠØ§Øª Ù†Ø§Ø¯Ø±Ø© ÙˆÙØ§ÙŠØ± Ø¨Ø§Ø³Ø§Øª Ù‚Ø¯ÙŠÙ…Ø©. ÙØ±ØµØ© Ù„Ø§ ØªØ¹ÙˆØ¶.', facebook: 'https://facebook.com', image: 'https://placehold.co/600x400/1f2937/ffffff?text=FreeFire+Account' },
            { id: 3, name: 'Ø­Ø³Ø§Ø¨ Netflix Ù…Ø´ØªØ±Ùƒ Ù„Ù…Ø¯Ø© Ø³Ù†Ø©', price: 50, desc: 'Ø§Ø´ØªØ±Ø§Ùƒ Ù†ØªÙÙ„ÙƒØ³ Ø±Ø³Ù…ÙŠ Ù„Ù…Ø¯Ø© 12 Ø´Ù‡Ø± Ø¨Ø¬ÙˆØ¯Ø© 4K. Ù…Ø¶Ù…ÙˆÙ†.', facebook: 'https://facebook.com', image: 'https://placehold.co/600x400/1f2937/ffffff?text=Netflix+Account' },
            { id: 4, name: 'Ø­Ø³Ø§Ø¨ Clash of Clans Ù…Ø§ÙƒØ³ ØªØ§ÙˆÙ† 14', price: 250, desc: 'Ù‚Ø±ÙŠØ© Ù…Ø§ÙƒØ³ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø¹ Ø¯ÙØ§Ø¹Ø§Øª ÙˆØ¬Ù†ÙˆØ¯. Ø¬Ø§Ù‡Ø²Ø© Ù„Ù„Ø­Ø±Ø¨.', facebook: 'https://facebook.com', image: 'https://placehold.co/600x400/1f2937/ffffff?text=CoC+Account' },
        ];
        products = [...sampleProducts];

        // --- Getting Elements from HTML ---
        // We get all the interactive parts of the page to add functionality to them.
        const productsGrid = document.getElementById('productsGrid');
        const noResults = document.getElementById('noResults');
        const searchInput = document.getElementById('searchInput');
        const adminPanelBtn = document.getElementById('adminPanelBtn');
        const addProductBtn = document.getElementById('addProductBtn');

        // Modals
        const addProductModal = document.getElementById('addProductModal');
        const viewProductModal = document.getElementById('viewProductModal');
        const adminModal = document.getElementById('adminModal');
        const alertModal = document.getElementById('alertModal');
        const alertMessage = document.getElementById('alertMessage');
        const confirmModal = document.getElementById('confirmModal');

        // Modal Buttons
        const closeAddModal = document.getElementById('closeAddModal');
        const closeViewModal = document.getElementById('closeViewModal');
        const closeAdminModal = document.getElementById('closeAdminModal');
        const submitProductBtn = document.getElementById('submitProduct');

        // --- Functions ---
        
        // This function enables the admin view (shows edit/delete buttons)
        function enableAdminView() {
            isAdmin = true;
            adminPanelBtn.style.display = 'flex';
            showAlert('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ± Ø¨Ù†Ø¬Ø§Ø­.', 'success');
            renderProducts(products); // Re-render to show admin buttons
        }

        // This function asks for the admin password when the site loads
        function promptForAdmin() {
            // We use a sessionStorage to remember if the user has already been prompted.
            if (!sessionStorage.getItem('adminPrompted')) {
                const password = prompt("Ù„Ù„Ø¯Ø®ÙˆÙ„ ÙƒÙ…Ø¯ÙŠØ±ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:");
                if (password === "admin123") {
                    enableAdminView();
                } else if (password !== null) {
                    alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙƒØ²Ø§Ø¦Ø± Ø¹Ø§Ø¯ÙŠ.");
                }
                sessionStorage.setItem('adminPrompted', 'true');
            }
        }

        // This function shows a small notification message
        function showAlert(message, type = 'error') {
            alertMessage.textContent = message;
            alertModal.classList.remove('bg-red-500', 'bg-green-500');
            alertModal.classList.add(type === 'success' ? 'bg-green-500' : 'bg-red-500');
            alertModal.classList.remove('translate-x-full');
            setTimeout(() => {
                alertModal.classList.add('translate-x-full');
            }, 3000);
        }
        
        // This function shows a confirmation dialog (e.g., "Are you sure you want to delete?")
        function showConfirm(title, message, onConfirm) {
            document.getElementById('confirmTitle').textContent = title;
            document.getElementById('confirmMessage').textContent = message;
            toggleModal(confirmModal, true);

            const confirmOk = document.getElementById('confirmOk');
            const confirmCancel = document.getElementById('confirmCancel');

            const okListener = () => {
                onConfirm();
                toggleModal(confirmModal, false);
                cleanup();
            };

            const cancelListener = () => {
                toggleModal(confirmModal, false);
                cleanup();
            };
            
            function cleanup() {
                confirmOk.removeEventListener('click', okListener);
                confirmCancel.removeEventListener('click', cancelListener);
            }

            confirmOk.addEventListener('click', okListener, { once: true });
            confirmCancel.addEventListener('click', cancelListener, { once: true });
        }
        
        // This function updates the stats in the admin panel
        function updateAdminStats() {
            if (!isAdmin) return;
            const totalValue = products.reduce((sum, p) => sum + p.price, 0);
            const totalPosts = products.length;
            const dailyProfit = newPostsToday * POST_FEE;

            document.getElementById('dailyProfit').textContent = dailyProfit;
            document.getElementById('totalValue').textContent = totalValue;
            document.getElementById('totalPosts').textContent = totalPosts;
        }

        // This is a very important function. It takes the product data and creates the HTML cards to display them.
        function renderProducts(productsToRender) {
            productsGrid.innerHTML = '';
            noResults.classList.toggle('hidden', productsToRender.length > 0);
            
            productsToRender.forEach(product => {
                const adminButtonsHTML = isAdmin ? `
                    <div class="flex gap-2 mt-2">
                         <button class="admin-edit-btn w-full bg-blue-600 hover:bg-blue-700 text-white py-1 px-2 text-sm rounded-lg flex items-center justify-center gap-1" data-id="${product.id}" title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù†Ø´ÙˆØ±"><i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„</button>
                         <button class="admin-delete-btn w-full btn-danger text-white py-1 px-2 text-sm rounded-lg flex items-center justify-center gap-1" data-id="${product.id}" title="Ø­Ø°Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±"><i class="fas fa-trash"></i> Ø­Ø°Ù</button>
                    </div>
                ` : '';

                const card = document.createElement('div');
                card.className = 'card rounded-lg overflow-hidden shadow-lg flex flex-col';
                card.innerHTML = `
                    <img class="w-full h-48 object-cover" src="${product.image}" alt="${product.name}" onerror="this.onerror=null;this.src='https://placehold.co/600x400/1f2937/ffffff?text=Image+Error';">
                    <div class="p-4 flex flex-col flex-grow">
                        <h3 class="font-bold text-lg truncate mb-2 flex-grow" title="${product.name}">${product.name}</h3>
                        <p class="text-blue-400 font-bold text-xl mb-4">${product.price} Ø¯ÙŠÙ†Ø§Ø±</p>
                        <button class="view-details-btn w-full btn-secondary py-2 px-4 rounded-lg mt-auto" data-id="${product.id}">Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„</button>
                        ${adminButtonsHTML}
                    </div>
                `;
                productsGrid.appendChild(card);
            });
            updateAdminStats();
        }

        // This function shows or hides the pop-up windows (modals)
        function toggleModal(modal, show) {
         
